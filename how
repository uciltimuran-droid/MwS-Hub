-- MWSdev Advanced UI Framework
-- Educational demonstration for authorized testing environments

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- Main GUI Creation
local MWSdev = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TitleBar = Instance.new("Frame")
local TitleLabel = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local ContentFrame = Instance.new("Frame")
local TabButtons = Instance.new("Frame")
local FeaturesFrame = Instance.new("ScrollingFrame")

-- RGB Animation Controller
local RGBController = {
    Enabled = true,
    Speed = 1,
    Hue = 0,
    Connection = nil
}

-- Feature States
local Features = {
    WalkSpeed = {
        Enabled = false,
        Value = 16
    },
    Fly = {
        Enabled = false,
        BodyVelocity = nil,
        BodyGyro = nil
    },
    Noclip = {
        Enabled = false
    }
}

-- Initialize GUI
MWSdev.Name = "MWSdev"
MWSdev.Parent = player.PlayerGui
MWSdev.ResetOnSpawn = false

-- Main Frame
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = MWSdev

-- Corner Radius
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MainFrame

-- Drop Shadow
local DropShadow = Instance.new("ImageLabel")
DropShadow.Name = "DropShadow"
DropShadow.BackgroundTransparency = 1
DropShadow.BorderSizePixel = 0
DropShadow.Size = UDim2.new(1, 0, 1, 0)
DropShadow.ZIndex = 0
DropShadow.Image = "rbxassetid://5234388158"
DropShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
DropShadow.ImageTransparency = 0.5
DropShadow.ScaleType = Enum.ScaleType.Slice
DropShadow.SliceCenter = Rect.new(10, 10, 118, 118)
DropShadow.Parent = MainFrame

-- Title Bar
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleBarCorner = Instance.new("UICorner")
TitleBarCorner.CornerRadius = UDim.new(0, 8)
TitleBarCorner.Parent = TitleBar

TitleLabel.Name = "TitleLabel"
TitleLabel.Size = UDim2.new(0, 100, 1, 0)
TitleLabel.Position = UDim2.new(0, 10, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "MWSdev v2.1"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 14
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = TitleBar

-- Control Buttons
MinimizeButton.Name = "MinimizeButton"
MinimizeButton.Size = UDim2.new(0, 25, 0, 25)
MinimizeButton.Position = UDim2.new(1, -55, 0, 2)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(45, 45, 50)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.TextSize = 14
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.Parent = TitleBar

CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 25, 0, 25)
CloseButton.Position = UDim2.new(1, -25, 0, 2)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
CloseButton.BorderSizePixel = 0
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 14
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = TitleBar

-- Content Area
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, 0, 1, -30)
ContentFrame.Position = UDim2.new(0, 0, 0, 30)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- Create Feature Controls
function createWalkSpeedControl(parent)
    local container = Instance.new("Frame")
    container.Size = UDim2.new(1, -20, 0, 60)
    container.Position = UDim2.new(0, 10, 0, 10)
    container.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    container.BorderSizePixel = 0
    container.Parent = parent
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = container
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 25)
    label.Position = UDim2.new(0, 10, 0, 5)
    label.BackgroundTransparency = 1
    label.Text = "WalkSpeed"
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextSize = 14
    label.Font = Enum.Font.GothamSemibold
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = container
    
    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size = UDim2.new(0, 50, 0, 25)
    valueLabel.Position = UDim2.new(1, -60, 0, 5)
    valueLabel.BackgroundTransparency = 1
    valueLabel.Text = tostring(Features.WalkSpeed.Value)
    valueLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    valueLabel.TextSize = 14
    valueLabel.Font = Enum.Font.GothamSemibold
    valueLabel.Parent = container
    
    local slider = Instance.new("Frame")
    slider.Size = UDim2.new(1, -20, 0, 20)
    slider.Position = UDim2.new(0, 10, 1, -30)
    slider.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
    slider.BorderSizePixel = 0
    slider.Parent = container
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 10)
    sliderCorner.Parent = slider
    
    local fill = Instance.new("Frame")
    fill.Size = UDim2.new((Features.WalkSpeed.Value - 16) / (100 - 16), 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(65, 105, 225)
    fill.BorderSizePixel = 0
    fill.Parent = slider
    
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(0, 10)
    fillCorner.Parent = fill
    
    local sliderButton = Instance.new("TextButton")
    sliderButton.Size = UDim2.new(1, 0, 1, 0)
    sliderButton.BackgroundTransparency = 1
    sliderButton.Text = ""
    sliderButton.Parent = slider
    
    sliderButton.MouseButton1Down:Connect(function()
        local connection
        connection = RunService.Heartbeat:Connect(function()
            local percent = math.clamp((mouse.X - slider.AbsolutePosition.X) / slider.AbsoluteSize.X, 0, 1)
            local value = 16 + percent * (100 - 16)
            Features.WalkSpeed.Value = math.floor(value)
            valueLabel.Text = tostring(Features.WalkSpeed.Value)
            fill.Size = UDim2.new(percent, 0, 1, 0)
            
            if Features.WalkSpeed.Enabled then
                applyWalkSpeed()
            end
        end)
        
        UserInputService.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                connection:Disconnect()
            end
        end)
    end)
    
    local toggle = Instance.new("TextButton")
    toggle.Size = UDim2.new(0, 60, 0, 25)
    toggle.Position = UDim2.new(1, -130, 0, 5)
    toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 65)
    toggle.BorderSizePixel = 0
    toggle.Text = "OFF"
    toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggle.TextSize = 12
    toggle.Font = Enum.Font.GothamBold
    toggle.Parent = container
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 4)
    toggleCorner.Parent = toggle
    
    toggle.MouseButton1Click:Connect(function()
        Features.WalkSpeed.Enabled = not Features.WalkSpeed.Enabled
        if Features.WalkSpeed.Enabled then
            toggle.Text = "ON"
            toggle.BackgroundColor3 = Color3.fromRGB(65, 105, 225)
            applyWalkSpeed()
        else
            toggle.Text = "OFF"
            toggle.BackgroundColor3 = Color3.fromRGB(60, 60, 65)
            resetWalkSpeed()
        end
    end)
end

function createFlyControl(parent)
    local container = Instance.new("Frame")
    container.Size = UDim2.new(1, -20, 0, 40)
    container.Position = UDim2.new(0, 10, 0, 80)
    container.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
    container.BorderSizePixel = 0
    container.Parent = parent
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = container
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(0, 100, 1, 0)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = "Fly"
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextSize = 14
    label.Font = Enum.Font.GothamSemibold
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = container
    
    local flyButton = Instance.new("TextButton")
    flyButton.Size = UDim2.new(0, 60, 0, 25)
    flyButton.Position = UDim2.new(1, -150, 0.5, -12)
    flyButton.BackgroundColor3 = Color3.fromRGB(60, 60, 65)
    flyButton.BorderSizePixel = 0
    flyButton.Text = "FLY"
    flyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    flyButton.TextSize = 12
    flyButton.Font = Enum.Font.GothamBold
    flyButton.Parent = container
    
    local unflyButton = Instance.new("TextButton")
    unflyButton.Size = UDim2.new(0, 60, 0, 25)
    unflyButton.Position = UDim2.new(1, -80, 0.5, -12)
    unflyButton.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
    unflyButton.BorderSizePixel = 0
    unflyButton.Text = "UNFLY"
    unflyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    unflyButton.TextSize = 12
    unflyButton.Font = Enum.Font.GothamBold
    unflyButton.Parent = container
    
    local flyCorner = Instance.new("UICorner")
    flyCorner.CornerRadius = UDim.new(0, 4)
    flyCorner.Parent = flyButton
    
    local unflyCorner = Instance.new("UICorner")
    unflyCorner.CornerRadius = UDim.new(0, 4)
    unflyCorner.Parent = unflyButton
    
    flyButton.MouseButton1Click:Connect(function()
        enableFly()
    end)
    
    unflyButton.MouseButton1Click:Connect(function()
        disableFly()
    end)
end

-- Feature Implementation Functions
function applyWalkSpeed()
    local character = player.Character
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid.WalkSpeed = Features.WalkSpeed.Value
    end
end

function resetWalkSpeed()
    local character = player.Character
    if character and character:FindFirstChild("Humanoid") then
        character.Humanoid.WalkSpeed = 16
    end
end

function enableFly()
    local character = player.Character
    if not character then return end
    
    disableFly() -- Clean up any existing fly
    
    local humanoid = character:FindFirstChild("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    
    if not humanoid or not rootPart then return end
    
    Features.Fly.BodyVelocity = Instance.new("BodyVelocity")
    Features.Fly.BodyVelocity.Velocity = Vector3.new(0, 0, 0)
    Features.Fly.BodyVelocity.MaxForce = Vector3.new(0, 0, 0)
    Features.Fly.BodyVelocity.Parent = rootPart
    
    Features.Fly.BodyGyro = Instance.new("BodyGyro")
    Features.Fly.BodyGyro.MaxTorque = Vector3.new(0, 0, 0)
    Features.Fly.BodyGyro.Parent = rootPart
    
    -- Enable flying forces
    Features.Fly.BodyVelocity.MaxForce = Vector3.new(40000, 40000, 40000)
    Features.Fly.BodyGyro.MaxTorque = Vector3.new(40000, 40000, 40000)
    
    Features.Fly.Enabled = true
    
    -- Fly control connection
    local flyConnection
    flyConnection = RunService.Heartbeat:Connect(function()
        if not Features.Fly.Enabled then
            flyConnection:Disconnect()
            return
        end
        
        local camera = workspace.CurrentCamera
        if not camera then return end
        
        Features.Fly.BodyGyro.CFrame = camera.CFrame
        
        local velocity = Vector3.new(0, 0, 0)
        local speed = 50
        
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
            velocity = velocity + camera.CFrame.LookVector * speed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
            velocity = velocity - camera.CFrame.LookVector * speed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
            velocity = velocity - camera.CFrame.RightVector * speed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
            velocity = velocity + camera.CFrame.RightVector * speed
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
            velocity = velocity + Vector3.new(0, speed, 0)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
            velocity = velocity - Vector3.new(0, speed, 0)
        end
        
        Features.Fly.BodyVelocity.Velocity = velocity
    end)
end

function disableFly()
    if Features.Fly.BodyVelocity then
        Features.Fly.BodyVelocity:Destroy()
        Features.Fly.BodyVelocity = nil
    end
    if Features.Fly.BodyGyro then
        Features.Fly.BodyGyro:Destroy()
        Features.Fly.BodyGyro = nil
    end
    Features.Fly.Enabled = false
end

-- RGB Animation System
function startRGBAnimation()
    if RGBController.Connection then
        RGBController.Connection:Disconnect()
    end
    
    RGBController.Connection = RunService.Heartbeat:Connect(function()
        if not RGBController.Enabled then return end
        
        RGBController.Hue = (RGBController.Hue + 0.01 * RGBController.Speed) % 1
        local color = Color3.fromHSV(RGBController.Hue, 0.8, 1)
        
        -- Animate title bar
        TitleBar.BackgroundColor3 = color
        
        -- Animate buttons
        MinimizeButton.BackgroundColor3 = color:Lerp(Color3.fromRGB(45, 45, 50), 0.5)
        CloseButton.BackgroundColor3 = color:Lerp(Color3.fromRGB(200, 60, 60), 0.3)
    end)
end

-- Dragging Functionality
local dragging = false
local dragInput, dragStart, startPos

TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

TitleBar.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Minimize Functionality
local minimized = false
local originalSize = MainFrame.Size

MinimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        -- Minimize to small bar
        MainFrame.Size = UDim2.new(0, 150, 0, 30)
        ContentFrame.Visible = false
        MinimizeButton.Text = "+"
    else
        -- Restore to original size
        MainFrame.Size = originalSize
        ContentFrame.Visible = true
        MinimizeButton.Text = "_"
    end
end)

-- Close Functionality
CloseButton.MouseButton1Click:Connect(function()
    MWSdev:Destroy()
    if RGBController.Connection then
        RGBController.Connection:Disconnect()
    end
end)

-- Initialize Features
createWalkSpeedControl(ContentFrame)
createFlyControl(ContentFrame)

-- Start RGB Animation
startRGBAnimation()

-- Character Added Handler to reapply features
player.CharacterAdded:Connect(function(character)
    wait(1) -- Wait for character to fully load
    
    if Features.WalkSpeed.Enabled then
        applyWalkSpeed()
    end
    
    if Features.Fly.Enabled then
        wait(2) -- Additional wait for fly
        enableFly()
    end
end)

-- Additional Features can be added here following the same pattern

print("MWSdev v2.1 Loaded Successfully")
print("Features: WalkSpeed, Fly, RGB UI, Draggable, Minimizable")
